!function(){"use strict";var e,t,n,r={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},d:function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},a=window.wp.element,o=window.ReactDOM,c=r.n(o),l=window.React,i=r.n(l);!function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"}(e||(e={})),function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"}(t||(t={})),function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"}(n||(n={}));var s="data-react-paypal-script-id",u="react-paypal-js",d="3.84.0",p=("https://js.braintreegateway.com/web/".concat(d,"/js/client.min.js"),"https://js.braintreegateway.com/web/".concat(d,"/js/paypal-checkout.min.js"),"paypal"),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)};function m(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function v(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function h(e){return void 0===e&&(e=p),window[e]}function E(e){var t=e.reactComponentName,n=e.sdkComponentKey,r=e.sdkRequestedComponents,a=void 0===r?"":r,o=e.sdkDataNamespace,c=void 0===o?p:o,l=n.charAt(0).toUpperCase().concat(n.substring(1)),i="Unable to render <".concat(t," /> because window.").concat(c,".").concat(l," is undefined.");if(!a.includes(n)){var s=[a,n].filter(Boolean).join();i+="\nTo fix the issue, add '".concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(s,"'}}>`.")}return i}function y(e){return"react-paypal-js-".concat(function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].charCodeAt(0)*n;e[n+1]&&(r+=e[n+1].charCodeAt(0)*(n-1)),t+=String.fromCharCode(97+Math.abs(r)%26)}return t}(JSON.stringify(e)))}function g(n,r){var a,o,c;switch(r.type){case t.LOADING_STATUS:return f(f({},n),{loadingStatus:r.value});case t.RESET_OPTIONS:return o=n.options[s],(null==(c=self.document.querySelector("script[".concat(s,'="').concat(o,'"]')))?void 0:c.parentNode)&&c.parentNode.removeChild(c),delete r.value[s],f(f({},n),{loadingStatus:e.PENDING,options:f(f({},r.value),(a={},a[s]="".concat(y(r.value)),a["data-sdk-integration-source"]=u,a))});case t.SET_BRAINTREE_INSTANCE:return f(f({},n),{braintreePayPalCheckoutInstance:r.value});default:return n}}var S=(0,l.createContext)(null);function w(){var t=function(e){if("function"==typeof(null==e?void 0:e.dispatch)&&0!==e.dispatch.length)return e;throw new Error("usePayPalScriptReducer must be used within a PayPalScriptProvider")}((0,l.useContext)(S));return[f(f({},t),{isInitial:t.loadingStatus===e.INITIAL,isPending:t.loadingStatus===e.PENDING,isResolved:t.loadingStatus===e.RESOLVED,isRejected:t.loadingStatus===e.REJECTED}),t.dispatch]}(0,l.createContext)({});var b=function(e){var t=e.className,n=void 0===t?"":t,r=e.disabled,a=void 0!==r&&r,o=e.children,c=e.forceReRender,s=void 0===c?[]:c,u=m(e,["className","disabled","children","forceReRender"]),d=a?{opacity:.38}:{},p="".concat(n," ").concat(a?"paypal-buttons-disabled":"").trim(),y=(0,l.useRef)(null),g=(0,l.useRef)(null),S=w()[0],N=S.isResolved,P=S.options,I=(0,l.useState)(null),O=I[0],R=I[1],A=(0,l.useState)(!0),C=A[0],D=A[1],T=(0,l.useState)(null)[1];function k(){null!==g.current&&g.current.close().catch((function(){}))}return(0,l.useEffect)((function(){if(!1===N)return k;var e=h(P["data-namespace"]);if(void 0===e||void 0===e.Buttons)return T((function(){throw new Error(E({reactComponentName:b.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:P.components,sdkDataNamespace:P["data-namespace"]}))})),k;try{g.current=e.Buttons(f(f({},u),{onInit:function(e,t){R(t),"function"==typeof u.onInit&&u.onInit(e,t)}}))}catch(e){return T((function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(e))}))}return!1===g.current.isEligible()?(D(!1),k):y.current?(g.current.render(y.current).catch((function(e){null!==y.current&&0!==y.current.children.length&&T((function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(e))}))})),k):k}),v(v([N],s,!0),[u.fundingSource],!1)),(0,l.useEffect)((function(){null!==O&&(!0===a?O.disable().catch((function(){})):O.enable().catch((function(){})))}),[a,O]),i().createElement(i().Fragment,null,C?i().createElement("div",{ref:y,style:d,className:p}):o)};function N(e,t){void 0===t&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach((function(e){n.setAttribute(e,t[e]),"data-csp-nonce"===e&&n.setAttribute("nonce",t["data-csp-nonce"])})),n}function P(e,t){if(void 0===t&&(t=I()),R(e,t),"undefined"==typeof window)return t.resolve(null);var n=function(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),function(e){var t=e["merchant-id"],n=e["data-merchant-id"],r="",a="";Array.isArray(t)?t.length>1?(r="*",a=t.toString()):r=t.toString():"string"==typeof t&&t.length>0?r=t:"string"==typeof n&&n.length>0&&(r="*",a=n),e["merchant-id"]=r,e["data-merchant-id"]=a}(e);var n,r,a=Object.keys(e).filter((function(t){return void 0!==e[t]&&null!==e[t]&&""!==e[t]})).reduce((function(t,n){var r=e[n].toString();return"data-"===n.substring(0,5)?t.dataAttributes[n]=r:t.queryParams[n]=r,t}),{queryParams:{},dataAttributes:{}}),o=a.queryParams,c=a.dataAttributes;return{url:"".concat(t,"?").concat((n=o,r="",Object.keys(n).forEach((function(e){0!==r.length&&(r+="&"),r+=e+"="+n[e]})),r)),dataAttributes:c}}(e),r=n.url,a=n.dataAttributes,o=a["data-namespace"]||"paypal",c=O(o);return function(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(null===n)return null;var r=N(e,t),a=n.cloneNode();if(delete a.dataset.uidAuto,Object.keys(a.dataset).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(a.dataset).forEach((function(e){a.dataset[e]!==r.dataset[e]&&(o=!1)})),o?n:null}(r,a)&&c?t.resolve(c):function(e,t){void 0===t&&(t=I()),R(e,t);var n=e.url,r=e.attributes;if("string"!=typeof n||0===n.length)throw new Error("Invalid url.");if(void 0!==r&&"object"!=typeof r)throw new Error("Expected attributes to be an object.");return new t((function(e,t){if("undefined"==typeof window)return e();!function(e){var t=e.url,n=e.attributes,r=e.onSuccess,a=e.onError,o=N(t,n);o.onerror=a,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}({url:n,attributes:r,onSuccess:function(){return e()},onError:function(){var e=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then((function(n){return 200===n.status&&t(e),n.text()})).then((function(e){var n=function(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}(e);t(new Error(n))})).catch((function(e){t(e)})):t(e)}})}))}({url:r,attributes:a},t).then((function(){var e=O(o);if(e)return e;throw new Error("The window.".concat(o," global variable is not available."))}))}function I(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function O(e){return window[e]}function R(e,t){if("object"!=typeof e||null===e)throw new Error("Expected an options object.");if(void 0!==t&&"function"!=typeof t)throw new Error("Expected PromisePonyfill to be a function.")}b.displayName="PayPalButtons";var A=function(e){var t=e.className,n=void 0===t?"":t,r=e.children,a=m(e,["className","children"]),o=w()[0],c=o.isResolved,s=o.options,u=(0,l.useRef)(null),d=(0,l.useState)(!0),p=d[0],v=d[1],y=(0,l.useState)(null)[1];return(0,l.useEffect)((function(){if(!1!==c){var e=h(s["data-namespace"]);if(void 0===e||void 0===e.Marks)return y((function(){throw new Error(E({reactComponentName:A.displayName,sdkComponentKey:"marks",sdkRequestedComponents:s.components,sdkDataNamespace:s["data-namespace"]}))}));!function(e){var t=u.current;if(!t||!e.isEligible())return v(!1);t.firstChild&&t.removeChild(t.firstChild),e.render(t).catch((function(e){null!==t&&0!==t.children.length&&y((function(){throw new Error("Failed to render <PayPalMarks /> component. ".concat(e))}))}))}(e.Marks(f({},a)))}}),[c,a.fundingSource]),i().createElement(i().Fragment,null,p?i().createElement("div",{ref:u,className:n}):r)};A.displayName="PayPalMarks";var C=function(e){var t=e.className,n=void 0===t?"":t,r=e.forceReRender,a=void 0===r?[]:r,o=m(e,["className","forceReRender"]),c=w()[0],s=c.isResolved,u=c.options,d=(0,l.useRef)(null),p=(0,l.useRef)(null),y=(0,l.useState)(null)[1];return(0,l.useEffect)((function(){if(!1!==s){var e=h(u["data-namespace"]);if(void 0===e||void 0===e.Messages)return y((function(){throw new Error(E({reactComponentName:C.displayName,sdkComponentKey:"messages",sdkRequestedComponents:u.components,sdkDataNamespace:u["data-namespace"]}))}));p.current=e.Messages(f({},o)),p.current.render(d.current).catch((function(e){null!==d.current&&0!==d.current.children.length&&y((function(){throw new Error("Failed to render <PayPalMessages /> component. ".concat(e))}))}))}}),v([s],a,!0)),i().createElement("div",{ref:d,className:n})};C.displayName="PayPalMessages";var D,T=function(n){var r,a=n.options,o=void 0===a?{"client-id":"test"}:a,c=n.children,d=n.deferLoading,p=void 0!==d&&d,m=(0,l.useReducer)(g,{options:f(f({},o),(r={},r[s]="".concat(y(o)),r["data-sdk-integration-source"]=u,r)),loadingStatus:p?e.INITIAL:e.PENDING}),v=m[0],h=m[1];return(0,l.useEffect)((function(){if(!1===p&&v.loadingStatus===e.INITIAL)return h({type:t.LOADING_STATUS,value:e.PENDING});if(v.loadingStatus===e.PENDING){var n=!0;return P(v.options).then((function(){n&&h({type:t.LOADING_STATUS,value:e.RESOLVED})})).catch((function(r){console.error("".concat("Failed to load the PayPal JS SDK script."," ").concat(r)),n&&h({type:t.LOADING_STATUS,value:e.REJECTED})})),function(){n=!1}}}),[v.options,p,v.loadingStatus]),i().createElement(S.Provider,{value:f(f({},v),{dispatch:h})},c)};document.addEventListener("DOMContentLoaded",(e=>{document.querySelectorAll(".attributes").forEach((e=>{const t=(D=JSON.parse(e.innerText)).name,n=document.querySelectorAll(".replace-"+t)[0];c().render((0,a.createElement)(L,D),n),n.classList.remove("replace-"+t)}))}));var k=10,j="";const L=e=>{const[t,n]=(0,l.useState)(10),[r,o]=(0,l.useState)(!1),[c,i]=(0,l.useState)(""),[s,u]=(0,l.useState)(!1),[d,p]=(0,l.useState)(!1),[f,m]=(0,l.useState)(""),[v,h]=(0,l.useState)(!1),[E,y]=(0,l.useState)("");return null==D.clientID?(0,a.createElement)("div",{className:"payBlock"}," ",(0,a.createElement)("p",null," ❌  Missing Paypal ClientID, ClientID can be found in developers dashboard. ")," "):null==D.serverURI?(0,a.createElement)("div",{className:"payBlock"}," ",(0,a.createElement)("p",null," ❌  Missing Server URI, Deploy ",(0,a.createElement)("a",{href:"https://github.com/CaptainUnknown/Buy-DERO-Server"}," this ")," NodeJS Server & add its URI. ")," "):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"payBlock"},(0,a.createElement)("h3",null," Buy DERO "),(0,a.createElement)("p",null," DERO:",(0,a.createElement)("input",{style:{width:"30%"},type:"number",id:"DEROAmount",value:t,placeholder:"DERO to Purchase",onChange:()=>{0==event.target.value?o(!0):o(!1),n(event.target.value),k=event.target.value}}),(0,a.createElement)("br",null),(0,a.createElement)("br",null)),(0,a.createElement)("p",null," Wallet Address:",(0,a.createElement)("input",{style:{width:"68%"},type:"text",id:"walletAddress",value:c,placeholder:"Wallet Address",onChange:()=>{66!=event.target.value.length?u(!0):u(!1),i(event.target.value),j=event.target.value}}),(0,a.createElement)("br",null),(0,a.createElement)("br",null)),r?(0,a.createElement)("p",{style:{color:"#DD2E44"}}," ❌ DERO Amount must be greater than zero "):null,t>9999?(0,a.createElement)("p",{style:{color:"#FFCC4D"}}," ⚠️ Your purchase may take some time to process "):null,s?(0,a.createElement)("p",{style:{color:"#DD2E44"}}," ❌ Invalid Wallet Address "):null,(0,a.createElement)("div",{style:{display:r||s?"none":"flex"}},(0,a.createElement)(T,{options:{"client-id":e.clientID}},(0,a.createElement)(b,{style:{color:"blue"},createOrder:async(t,n)=>(console.log("Wallet: "+j),console.log("Quantity: "+parseInt(Math.round(k))),await fetch(`${e.serverURI}/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:1,quantity:parseInt(Math.floor(k)),wallet:c}]})}).then((e=>e.ok?e.json():e.json().then((e=>Promise.reject(e))))).then((e=>{let{id:t}=e;return t})).catch((e=>{console.error(e.error),alert("Error: "+e.error)}))),onApprove:async(t,n)=>await fetch(`${e.serverURI}/capture-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:t.orderID,wallet:j})}).then((e=>e.json())).then((e=>{console.log(e),m(e.transactionID),p(!0)})).catch((e=>{console.error(e.error.message),y(e.error.message)}))})))),(0,a.createElement)("div",{onClick:()=>{p(!1)},className:"popupWrapper",style:{display:d?"flex":"none"}},(0,a.createElement)("div",{className:"popup",style:{height:"145px",alignItems:"center"}},(0,a.createElement)("p",null," Congrats! Your DERO are on the way! 🚀 "),(0,a.createElement)("p",null," ",f," "))),(0,a.createElement)("div",{onClick:()=>{h(!1)},className:"popupWrapper",style:{display:v?"flex":"none"}},(0,a.createElement)("div",{className:"popup",style:{height:"145px",alignItems:"center"}},(0,a.createElement)("p",null," Oops! This wasn't supposed to happen. "),(0,a.createElement)("p",null," ",E," "))))}}();